<!DOCTYPE html>
<html>
<head>

</head>
<body>
<canvas id = "canvas" width="988" height="500" style =" border:4px solid #000000;">
</canvas>
<script>
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');
  //ctx.fillStyle = 'green';
  //ctx.fillRect(50, 200, 20, 20);
  //ctx.fillRect(75, 200, 20, 20);
  //ctx.fillRect(100, 200, 20, 20);
  //ctx.fillRect(100, 225, 20, 20);
  //ctx.fillRect(100, 250, 20, 20);
  //ctx.fillRect(125, 250, 20, 20);
  //ctx.fillRect(150, 250, 20, 20);
  //ctx.fillRect(0, 0, 20, 20);
  //ctx.fillRect(0, 25, 20, 20);
  //ctx.fillRect(25, 0, 20, 20);
  //ctx.fillRect(980, 480, 20, 20);
  //ctx.fillRect(955, 480, 20, 20);
  //ctx.fillRect(980, 455, 20, 20);
  var snake = [];
  var dir;
  var game;
  var foodX;
  var foodY;
  snake[0] = { x : 0, y : 253 };
  snake[1] = { x : 23, y : 253 };
  snake[2] = { x : 46, y : 253 };

  foodGeneration();

  function foodGeneration()
  {
   foodX = Math.floor(Math.random()*23+1);
   foodX = foodX *23;  
   foodY = Math.floor(Math.random()*15+3);
   foodY = foodY *23;
   ctx.fillStyle = "red";
   ctx.fillRect(foodX,foodY,20,20);
  }

  window.addEventListener('keydown', function(event) {
  const key = event.keyCode;
  clearInterval(game);

  if (key == 37 && dir != "RIGHT"){
    game = setInterval(drawSnake,100);
    dir = "LEFT";
    console.log("Left")
  }

  else if (key == 38 && dir != "DOWN"){
    game = setInterval(drawSnake,100);
    dir = "UP";
    console.log("UP")

  }
      
  else if (key == 39 && dir != "LEFT"){
    game = setInterval(drawSnake,100);
    dir = "RIGHT";
    console.log("Right")

  }
     
  else if (key == 40 && dir != "UP"){
    game = setInterval(drawSnake,100);
    dir = "DOWN";
    console.log("Down")

  }
  console.log(key)


});
   
  function drawSnake()
  {   
    ctx.clearRect(snake[snake.length -1].x, snake[snake.length -1].y,20,20);
    var snakeX = snake[0].x;
    var snakeY = snake[0].y;
    if (dir == "LEFT") snakeX -= 23;
    if (dir == "UP") snakeY -= 23;
    if (dir == "RIGHT") snakeX += 23;
    if (dir == "DOWN") snakeY += 23;

      var newHead = {
        x: snakeX,
        y: snakeY
      }
      console.log(newHead)
      snake.unshift(newHead);
      snake.pop();

      if (snakeX == foodX && snakeY == foodY)
      {
        snake.push(newHead);
        foodGeneration(); 
      }

      for (var i = 0; i < snake.length; i++)
      { 
       ctx.fillStyle = (i ==0)?'black':'green';
       ctx.fillRect(snake[i].x,snake[i].y,20,20);

      }
    
  }



</script>
</body>
</html>